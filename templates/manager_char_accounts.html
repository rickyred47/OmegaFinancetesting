{% extends "base_manager.html" %}
    {% block title %}Chart of Accounts{% endblock %}
    {% block head %}
    <link href="{{ url_for('static', filename= 'files/accounts_admin/styles.css')}}" type="text/css" rel="stylesheet"/>
    <script src="{{ url_for('static', filename= 'files/accounts_admin/data.js') }}"></script>
    {% endblock %}
    {% block content %}

      <!-- Accounts Background (Rectangle) -->
      <div id="accountsbx" class="ax_default box_1" data-label="White_Box">
        <div id="accountsbx_div" class=""></div>
        <div id="accountsbx_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Accounts_Header (Rectangle) -->
      <div id="accountslbl" class="ax_default heading_1" data-label="Addtochartofaccounts_Header">
        <div id="accountslbl_div" class=""></div>
        <div id="accountslbl_text" class="text ">
          <p><span>Chart of Accounts</span></p>
        </div>
      </div>

        <!-- Filter By Label (Rectangle) -->
      <div id="filterbylbl" class="ax_default label" data-label="Account Name">
        <div id="filterbylbl_div" class=""></div>
        <div id="filterbylbl_text" class="text ">
          <p><span>Filter by:</span></p>
        </div>
      </div>

        <!-- Account Category lbl (Rectangle) -->
      <div id="accountcatlbl" class="ax_default label" data-label="Account Name">
        <div id="accountcatlbl_div" class=""></div>
        <div id="accountcatlbl_text" class="text ">
          <p><span>Account Category:</span></p>
        </div>
      </div>

      <!-- Account Category (Droplist) -->
      <div id="accountcat" class="ax_default droplist" data-label="AccountType">
        <div id="accountcat_div" class=""></div>
        <select id="accountcat_input" class="u13_input" onchange="filter()">
          <option class="accountcat_input_option" value="All">All</option>
          <option class="accountcat_input_option" value="Asset">Asset</option>
          <option class="accountcat_input_option" value="Liability">Liability</option>
          <option class="accountcat_input_option" value="Equity">Equity</option>
          <option class="accountcat_input_option" value="Revenue">Revenue</option>
          <option class="accountcat_input_option" value="Expenses">Expenses</option>
        </select>
      </div>

      <!-- Account Term Label (Rectangle) -->
      <div id="accounttermlbl" class="ax_default label" data-label="Account Name">
        <div id="accounttermlbl_div" class=""></div>
        <div id="accounttermlbl_text" class="text ">
          <p><span>Account subcategory:</span></p>
        </div>
      </div>

	  <!-- Account Term (Droplist) -->
      <div id="accountsubcat" class="ax_default droplist" data-label="AccountType">
        <div id="accountterm_div" class=""></div>
        <select id="accountsubcat_input" class="u17_input" onchange="filter()">
          <option class="accountterm_input_option" value="All">All</option>
          <option class="accountterm_input_option" value="Current">Current</option>
        </select>
      </div>
		
      <!-- Account Status Label (Rectangle) -->
      <div id="accountstatlbl" class="ax_default label" data-label="Account Name">
        <div id="accountstatlbl_div" class=""></div>
        <div id="accountstatlbl_text" class="text ">
          <p><span>Account Status:</span></p>
        </div>
      </div>

      <!-- AccountType (Droplist) -->
      <div id="accountstatus" class="ax_default droplist" data-label="AccountType">
        <div id="accountstatus_div" class=""></div>
        <select id="accountstatus_input" class="u18_input" onchange="filter()">
          <option class="accountstatus_input_option" value="All">All</option>
          <option class="accountstatus_input_option" value="Active">Active</option>
          <option class="accountstatus_input_option" value="Inactive">Inactive</option>
        </select>
      </div>

      <!-- Date Range -->
      <div id="date_filter" data-label="Date_range">
          <p><span>Date range:</span></p>
      </div>
      <div id="date_range_input">
        <p><input id="start_date" type="date" onchange="filter()"> to <input id="end_date" type="date" onchange="filter()">
      </div>
        <script>
            const now = new Date();
            let now_day = now.getDate();
            let now_month = now.getMonth();
            now_month = now_month + 1;
            let year = now.getFullYear();
            let date;
            if (now_month < 10) {
                if(now_day < 10) {
                    date = "" + year + "-0" + now_month + "-0" + now_day;
                } else {
                    date = "" + year + "-0" + now_month + "-" + now_day;
                }
            }
            else {
                if(now_day < 10){
                    date = "" + year + "-" + now_month + "-0" + now_day;
                } else {
                    date = "" + year + "-" + now_month + "-" + now_day;
                }
            }
            document.getElementById("end_date").value = date;
        </script>
		
	  <table id="accounts_table">
		  <tr>
			  <th>Account<br>Number</th>
			  <th>Account<br>Name</th>
			  <th>Account Category</th>
			  <th>Account<br>SubCatergory</th>
			  <th>Account<br>Balance</th>
			  <th>Account<br>Created By</th>
			  <th>Date Created</th>
			  <th>Comment</th>
			  <th>Account State</th>
		  </tr>
          {% for account in accounts %}
            <tr style="text-align: right">
                <td><a href="{{ url_for('manager_account_ledger', account_id=account.id)}}">{{ account.number }}</a></td>
                <td><a href="{{ url_for('manager_account_ledger', account_id=account.id)}}">{{ account.name }}</a></td>
              <td>{{ account.category }}</td>
              <td>{{ account.subcategory }}</td>
              <td style="text-align: left; padding-left: 10px">{{ "${:,.2f}".format(account.balance)}}</td>
              <td>{{ account.created_by }}</td>
              <td>{{ account.date_created }}</td>
              <td>{{ account.comment }}</td>
              {% if account.active %}
                <td>Active</td>
              {% else %}
                <td>Inactive</td>
              {% endif %}
              </tr>
          {% endfor %}
	  </table>

      <!-- SearchButton (Rectangle) -->
      <div id="usersearchbtn" class="ax_default primary_button" data-label="SearchButton">
        <div id="usersearchbtn_div" class="" ></div>
        <div id="usersearchbtn_text" class="text " title = "Search for User">
          <p><span>Search</span></p>
        </div>
      </div>

      <!-- SearchBar (Text Field) -->
      <div id="usersearchtxt" class="ax_default text_field" data-label="SearchBar">
        <p><label for="search_options"></label><select id="search_options" name="search_options" onchange="accounts_search()">
            <option value="Number">Number</option>
            <option value="Name">Name</option>
        </select>
            <input id="search_input" type="text" value="" class="u38_input" onkeyup="accounts_search()" placeholder="Account Search"/></p>
      </div>
{% endblock %}
